# Setup the run
- id: inform_start
  help: This task demonstrates how scripts can be embedded in a workflow
  cmd: python
  stdin: |
    import sys
    print(sys.version)

# TODO
# Gather input data

# Alignment Modules
{% with after = "inform_start" %}
{% include "dna_align_bwa_mem.yaml" %}
{% endwith %}

- id: alignment_is_done
  help: This is just a symbolic task that represents the point at which
    all of the alignment steps are done. It's completely unnecessary, but
    demonstrates how to specify "after" for multiple items. 
  after: mark_duplicates_.*
  cmd: null

# Somatic variant calling modules
{% for dnapair in project.config.run_parameters.dnapair %}
{% with after = "alignment_is_done", dnapair = dnapair %}
{% include "mutect2.yaml" %}
{% include "strelka2.yaml" %}
{% endwith %}
{% endfor %}

