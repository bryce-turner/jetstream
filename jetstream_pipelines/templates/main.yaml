
- id: inform_start
  cmd: bash
  stdin: |
    #!/bin/bash
    echo Project started $(date) > started.txt


{% for sample in project.list_samples() %}
- id: Alignment_{{ sample.sample_name }}
  after: inform_start
  cmd:
    - jetstream_pipelines
    - dna_align
    - --sample
    - '{{ sample | tojson }}'
{% endfor %}


- id: Alignment_is_done
  description: This is just a symbolic task that represents the point at which all of the alignment steps are done.
  after: {% for sample in project.list_samples() %}
    - Alignment_{{ sample.sample_name }} {%- endfor %}
  cmd: sleep 3



- id: inform_complete
  after: Alignment_is_done
  cmd: bash
  stdin: |
    #!/bin/bash
    echo Project all done $(date) > finished.txt

