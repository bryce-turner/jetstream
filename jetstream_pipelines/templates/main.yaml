# Setup the run
- id: inform_start
  help: This task demonstrates how scripts can be embedded in a workflow
  cmd: python
  stdin: |
    import os
    print(os.listdir('.'))

# TODO
# Gather input data

{% if dna_module is defined %}
{% with task_prefix='alignment_' %}
{% filter replace('id:', 'ID:') %}
{% include dna_module %}
{% endfilter %}
{% endwith %}
{% endif %}



# RNA Alignment steps
# TODO


# Stuff between alignment and variant calling
- id: alignment_is_done
  help: This is just a symbolic task that represents the point at which
    all of the alignment steps are done. It's completely unnecessary, but
    demonstrates how to specify "after" for multiple items. 
  after: 
    {% for sample in project.list_samples() %}
    - merge_bams_{{ sample.sample_name }} 
    {% endfor %}
  cmd: echo





# Finalize the run
- id: inform_complete
  after: alignment_is_done
  cmd: bash
  stdin: |
    #!/bin/bash
    echo Project all done $(date) > finished.txt

